<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="

This function supports the approximation of the price of the total title and abstract
screening with ChatGPT. The function only provide approximately accurate pricing
estimates for screenings drawing on the function calling function incl_function_simple (Default)
since the detailed descriptions will increase the completion tokens with an unknown amount
which furthermore is rather model sensitive with gpt-4 models yielding longer
detailed responses relative to gpt-3.5-turbo models."><title>Approximate price estimation for title and abstract screening using ChatGPT models — approximate_price_gpt • AIscreenR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Approximate price estimation for title and abstract screening using ChatGPT models — approximate_price_gpt"><meta property="og:description" content="

This function supports the approximation of the price of the total title and abstract
screening with ChatGPT. The function only provide approximately accurate pricing
estimates for screenings drawing on the function calling function incl_function_simple (Default)
since the detailed descriptions will increase the completion tokens with an unknown amount
which furthermore is rather model sensitive with gpt-4 models yielding longer
detailed responses relative to gpt-3.5-turbo models."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">AIscreenR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9011</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Using-ChatGPT-For-Screening.html">Using ChatGPT for Title and Abstract Screening in Systematic Reviews</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MikkelVembye/AIscreenR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Approximate price estimation for title and abstract screening using ChatGPT models</h1>
      <small class="dont-index">Source: <a href="https://github.com/MikkelVembye/AIscreenR/blob/HEAD/R/approximate_price.R" class="external-link"><code>R/approximate_price.R</code></a></small>
      <div class="d-none name"><code>approximate_price_gpt.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a><br><br>
This function supports the approximation of the price of the total title and abstract
screening with ChatGPT. The function only provide approximately accurate pricing
estimates for screenings drawing on the function calling function <code>incl_function_simple</code> (Default)
since the detailed descriptions will increase the completion tokens with an unknown amount
which furthermore is rather model sensitive with gpt-4 models yielding longer
detailed responses relative to gpt-3.5-turbo models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">approximate_price_gpt</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">prompt</span>,</span>
<span>  <span class="va">studyid</span>,</span>
<span>  <span class="va">title</span>,</span>
<span>  <span class="va">abstract</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"gpt-3.5-turbo-0613"</span>,</span>
<span>  reps <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  top_p <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  token_word_ratio <span class="op">=</span> <span class="fl">1.6</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Dataset containing the titles and abstracts.</p></dd>


<dt>prompt</dt>
<dd><p>Prompt(s) to paste before the title and abstract.</p></dd>


<dt>studyid</dt>
<dd><p>Unique ID of study. If missing, this is generated
automatically.</p></dd>


<dt>title</dt>
<dd><p>Name of the variable containing the title information.</p></dd>


<dt>abstract</dt>
<dd><p>Name of variable containing the abstract information.</p></dd>


<dt>model</dt>
<dd><p>Character string with the name of the completion model. Can take
multiple models, including gpt-4 models. Default = <code>"gpt-3.5-turbo-0613"</code>.
Find available model at
<a href="https://platform.openai.com/docs/models/model-endpoint-compatibility" class="external-link">https://platform.openai.com/docs/models/model-endpoint-compatibility</a>.</p></dd>


<dt>reps</dt>
<dd><p>Numerical value indicating the number of times the same
question should be sent to ChatGPT. This can be useful to test consistency
between answers. Default is <code>1</code> but when using 3.5 models, we recommend setting this
value to <code>10</code>.</p></dd>


<dt>top_p</dt>
<dd><p>'An alternative to sampling with temperature, called nucleus sampling,
where the model considers the results of the tokens with top_p probability mass.
So 0.1 means only the tokens comprising the top 10% probability mass are considered.
We generally recommend altering this or temperature but not both.' (OPEN-AI). Default is 1.
Find documentation at
<a href="https://platform.openai.com/docs/api-reference/chat/create#chat/create-top_p" class="external-link">https://platform.openai.com/docs/api-reference/chat/create#chat/create-top_p</a>.</p></dd>


<dt>token_word_ratio</dt>
<dd><p>The multiplier used to approximate the number of tokens per word.
Default is <code>1.6</code> which we empirically have found to be the average number of tokens per word.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>"gpt_price"</code>. The object is a list containing the following
components:</p>
<dl><dt>price</dt>
<dd><p>numerical value indicating the total approximate price (in USD) of the screening across all gpt-models expected to be used for the screening.</p></dd>

<dt>price_data</dt>
<dd><p>dataset with prices across all gpt models expected to be used for screening.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">prompt</span> <span class="op">&lt;-</span> <span class="st">"This is a prompt"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">app_price</span> <span class="op">&lt;-</span> <span class="fu">approximate_price_gpt</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">filges2015_dat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span>,</span></span>
<span class="r-in"><span>  prompt <span class="op">=</span> <span class="va">prompt</span>,</span></span>
<span class="r-in"><span>  studyid <span class="op">=</span> <span class="va">studyid</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="va">title</span>,</span></span>
<span class="r-in"><span>  abstract <span class="op">=</span> <span class="va">abstract</span>,</span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  reps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">app_price</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The approximate price of the (simple) screening will be around $0.0674.</span>
<span class="r-in"><span><span class="va">app_price</span><span class="op">$</span><span class="va">price_dollar</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.0674</span>
<span class="r-in"><span><span class="va">app_price</span><span class="op">$</span><span class="va">price_data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   model     iterations input_price_dollar output_price_dollar total_price_dollor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> gpt-3.5-…         10             0.021<span style="text-decoration: underline;">9</span>             0.000<span style="text-decoration: underline;">44</span>             0.022<span style="text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> gpt-4              1             0.043<span style="text-decoration: underline;">8</span>             0.001<span style="text-decoration: underline;">32</span>             0.045<span style="text-decoration: underline;">1</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mikkel H. Vembye.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

