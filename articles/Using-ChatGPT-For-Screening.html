<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="AIscreenR">
<title>Using ChatGPT for Title and Abstract Screening in Systematic Reviews â€¢ AIscreenR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using ChatGPT for Title and Abstract Screening in Systematic Reviews">
<meta property="og:description" content="AIscreenR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">AIscreenR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9015</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Using-ChatGPT-For-Screening.html">Using ChatGPT for Title and Abstract Screening in Systematic Reviews</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MikkelVembye/AIscreenR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Using ChatGPT for Title and Abstract Screening in Systematic Reviews</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MikkelVembye/AIscreenR/blob/HEAD/vignettes/Using-ChatGPT-For-Screening.Rmd" class="external-link"><code>vignettes/Using-ChatGPT-For-Screening.Rmd</code></a></small>
      <div class="d-none name"><code>Using-ChatGPT-For-Screening.Rmd</code></div>
    </div>

    
    
<div class="warning" style="margin-left:2em; margin-right:2em; margin-bottom:2em; margin-top:2em; padding:0.1em; background-color: #d7dbdd; border: solid #bdc3c7 3px">
<span>
<p style="margin-top:1em; text-align:center">
<b>Important note</b>
</p>
<p style="margin:1em">
This vignette represent tentative work-in-progress only. The general
applicability and efficacy of using large-language models (LLMs)
including ChatGPT for title and abstract screening in literature reviews
are still rather limited (Syriani et al., 2023). Our first results
suggest that ChatGPT can be a reliable second screener when reviewing
specific and well defined interventions. The first evidence of this is
shown in this vignette. However, be aware that our first results are
based on a retrospective analysis which might not generalize to
prospective screenings where ChatGPT potentially has not been trained on
that reference data, that is data added to the internet after 2021. Also
note that the result presented here are for tutorial purposes only. Hard
inferences about the relative efficacy of the used gpt models should be
avoided.
</p>
<p></p></span>
</div>
<p>In this vignette, we show how a title and abstract screening with
ChatGPT can be done in R. The advantages of conducting the screening
with ChatGPT via R is 1) that reviewers can easily work with a large
number of references, avoiding copy-paste procedures, 2) that the total
screening time can be substantially increased relative to using the
ChatGPT interface, 3) that it eases model comparison, and 4) that
consistency between gpt answer for the same title and abstract can
easily be tested. In this vignette, we also show the first/initial proof
of concept for the use of ChatGPT as a reliable second screener (see
also Syriani et al., 2023). This goes without saying that ChatGPT works
in all cases, and we think the tool should be use carefully and should
always assisted by a human (human-in-the-loop). Consequently, we do not
recommend to use ChatGPT as a single screener per se. If used to reduced
the overall number of references needed to be screened, our tentative
recommendation is to random sample approximately 10% of the studies
excluded by gpt to check the accuracy of the screening.</p>
<div class="section level3">
<h3 id="getting-started-loading-relevant-ris-file-data-for-screening">Getting started: Loading relevant ris file data for screening<a class="anchor" aria-label="anchor" href="#getting-started-loading-relevant-ris-file-data-for-screening"></a>
</h3>
<p>At this stage, we expect that you have a pile of ris-files,
containing titles and abstracts for the references you would like to
screen. You can retrieve ris-files in several ways, either directly from
research database, a Google Scholar search, or exported from your
reference management tool, such as EndNote, Mendeley, and RefMan.
Alternatively, you can export ris-file from systematic software tool
such as <a href="https://eppi.ioe.ac.uk/EPPIReviewer-Web/home" class="external-link">EPPI-reviewer</a>,
<a href="https://www.covidence.org/" class="external-link">Covidence</a>, <a href="https://www.metareviewer.org/landing/index.html" class="external-link">MetaReviewer</a>,
<a href="https://revtools.net/" class="external-link"><code>revtools</code></a>, or whatever
software you use. In the example given below, we load ris-files
extracted from the EPPI-reviewer. A minor advantage of extracting
ris-files from systematic software tools is that they add a unique study
ID for each reference. This feature makes it easier to keep track of the
screening. Yet, such ID can be generated in R as well, and is
automatically generated in the <code><a href="../reference/tabscreen_gpt.html">tabscreen_gpt()</a></code> function
when unique IDs are not provided. When using ChatGPT as the second
screener, we recommend that the human screening has been done before
uploading to R. Thereby, it is possible to compare the screenings
instantly after the computer screening has been done. In the below
example we load ris-files separately for excluded and included
ris-files, respectively, and add the <code>human_code</code> variable
that tracks the human decision.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Installation</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="co"># devtools::install_github("MikkelVembye/AIscreenR")</span></span>
<span></span>
<span><span class="co"># Loading packages </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mikkelvembye.github.io/AIscreenR/">AIscreenR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://revtools.net" class="external-link">revtools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Loading excluded studies</span></span>
<span><span class="co"># Reading path to risfiles</span></span>
<span><span class="va">excl_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"excl_tutorial.ris"</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ris_dat_excl</span> <span class="op">&lt;-</span> <span class="fu">revtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/revtools/man/read_bibliograpy.html" class="external-link">read_bibliography</a></span><span class="op">(</span><span class="va">excl_path</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">eppi_id</span>, <span class="va">title</span>, <span class="va">abstract</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># Using only relevant variables</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    human_code <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Loading included studies</span></span>
<span><span class="va">incl_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"incl_tutorial.ris"</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ris_dat_incl</span> <span class="op">&lt;-</span> <span class="fu">revtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/revtools/man/read_bibliograpy.html" class="external-link">read_bibliography</a></span><span class="op">(</span><span class="va">incl_path</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">eppi_id</span>, <span class="va">title</span>, <span class="va">abstract</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    human_code <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">filges2015_dat</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">ris_dat_excl</span>, <span class="va">ris_dat_incl</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    studyid <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">studyid</span>, .after <span class="op">=</span> <span class="va">eppi_id</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">filges2015_dat</span></span>
<span><span class="co">#&gt; # A tibble: 270 Ã— 6</span></span>
<span><span class="co">#&gt;    author                              eppi_id studyid title abstract human_code</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                               &lt;chr&gt;     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Holloway R G and Gramling R and Keâ€¦ 9434957       1 Estiâ€¦ "Prognoâ€¦          0</span></span>
<span><span class="co">#&gt;  2 Morawska Alina and Stallman Helen â€¦ 9433838       2 Selfâ€¦ "Behaviâ€¦          0</span></span>
<span><span class="co">#&gt;  3 Michel C M and Pascual-Marqui R D â€¦ 9431171       3 Freqâ€¦ "The toâ€¦          0</span></span>
<span><span class="co">#&gt;  4 Paul Howard A                       9433968       4 A Reâ€¦ "The arâ€¦          0</span></span>
<span><span class="co">#&gt;  5 Feinberg I and De Bie E and Davis â€¦ 9434460       5 Topoâ€¦ "STUDY â€¦          0</span></span>
<span><span class="co">#&gt;  6 Hamburg Sam R                       9433554       6 BOOKâ€¦ "The arâ€¦          0</span></span>
<span><span class="co">#&gt;  7 Park H Y and Lee B J and Kim J H aâ€¦ 9435130       7 Rapiâ€¦ "Backgrâ€¦          0</span></span>
<span><span class="co">#&gt;  8 Petrek J                            9432040       8 Pictâ€¦ "AIMS: â€¦          0</span></span>
<span><span class="co">#&gt;  9 Schwartzman Meredith P and Wahler â€¦ 9434093       9 Enhaâ€¦ "New anâ€¦          0</span></span>
<span><span class="co">#&gt; 10 Faber J and Srutova L and Pilarovaâ€¦ 9431505      10 EEG â€¦ "Spontaâ€¦          0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-api-key-openai">Getting API key (OpenAI)<a class="anchor" aria-label="anchor" href="#getting-api-key-openai"></a>
</h3>
<p>Before you can use the functions from <code>AIscreenR</code> to
screen your references, you must generate your own secret API key from
OpenAI. To do so you must first ensure that you have created an account
at OpenAI (<em>if you have not done so at this stage, you can sign up <a href="https://auth0.openai.com/u/login/identifier?state=hKFo2SBqQjNHSlc1ejIyREpUb01hdDF2OHEzQy12NnJwWlFUN6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIEJSOWJaamdKLWswNGlfWDQ2NER1OXJmVUNpVmVzVjZfo2NpZNkgRFJpdnNubTJNdTQyVDNLT3BxZHR3QjNOWXZpSFl6d0Q" class="external-link">here</a>).</em>
When having an account, go to <a href="https://platform.openai.com/account/api-keys" class="external-link">https://platform.openai.com/account/api-keys</a>
and press the <code>+ Create new secret key</code> button (see Figure 1
below) and give your key a name.</p>
<p>Â </p>
<div class="figure">
<img src="helper-stuff/API_key_pic.png" alt="*Figure 1 - Generate API key from OpenAI*" width="100%"><p class="caption">
<em>Figure 1 - Generate API key from OpenAI</em>
</p>
</div>
<p>Â </p>
<p>When you have generated your secret API key, remember to store it
safely since you will not be able see it again. <strong>NOTE</strong>:
<em>If you lose your API key, you can just generate a new one</em>.</p>
</div>
<div class="section level3">
<h3 id="handling-your-api-key">Handling your API key<a class="anchor" aria-label="anchor" href="#handling-your-api-key"></a>
</h3>
<p>When you have retrieved your API, you could in theory add it directly
to the <code>AIscreenR</code> functions via the <code>api_key</code>
argument. Yet, this would be an improper way to work the API key since
you would easily compromise your secret key. For example, your API key
would be disclosed when sharing your codes with others which in turn
would be able to draw on your OpenAI account. Also OpenAI will cancel
the API key if they recognize that your API key has been compromised,
e.g., by pushing it to a public GitHub page. To overcome this issue you
have several options. You can either work with what we call permanent or
temporary solutions.</p>
<div class="section level4">
<h4 id="pemanent-solution">Pemanent solution<a class="anchor" aria-label="anchor" href="#pemanent-solution"></a>
</h4>
<p>The easiest way to work with your API key is to permanently added it
to your R environment as an environment variable. This can be achieved
with <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>. In the
<code>.Renviron</code> file, write <code>CHAT_GPT=your_key</code> as
depicted in Figure 2. After entering the API key, close and save the
<code>.Renviron</code> file and restart <code>RStudio</code> (ctrl +
shift + F10). From now on, the <code>AIscreenR</code> functions will use
the <code><a href="../reference/get_api_key.html">get_api_key()</a></code> function to get your API key from your R
environment automatically. By using this approach you donâ€™t have to
worry more about you API key (unless you update RStudio, deliberately
delete the key, or get a new computer. Then you must repeat this
procedure). Â </p>
<div class="figure">
<img src="helper-stuff/Renviron.png" alt="*Figure 2 - R environment file*" width="100%"><p class="caption">
<em>Figure 2 - R environment file</em>
</p>
</div>
<p>Â </p>
</div>
<div class="section level4">
<h4 id="temporary-solution">Temporary solution<a class="anchor" aria-label="anchor" href="#temporary-solution"></a>
</h4>
<p>If you do not want to add you API key permanently to your R
environment, you can use <code><a href="../reference/set_api_key.html">set_api_key()</a></code>. When executing
<code><a href="../reference/set_api_key.html">set_api_key()</a></code>, you will see a pop-up window in which you
can enter your API key. This will add your API key as temporary
environment variable. Consequently, when you restart RStudio, you will
no longer be able to find your API key in your R environment.
Alternatively, you can pass a decrypted key to the
<code><a href="../reference/set_api_key.html">set_api_key()</a></code>, like
<code>set_api_key(key = secret_decrypt(encrypt_key, "YOUR_SECRET_KEY_FOR_DECRYTING"))</code>.
See the <a href="https://httr2.r-lib.org/articles/wrapping-apis.html#basics" class="external-link"><code>HTTR2</code></a>
pacakge for further details about this solution. Â </p>
<div class="figure">
<img src="helper-stuff/set_api.png" alt="*Figure 3 - Set API key*" width="100%"><p class="caption">
<em>Figure 3 - Set API key</em>
</p>
</div>
<p>Â </p>
</div>
</div>
<div class="section level3">
<h3 id="working-with-prompts-in-r">Working with prompts in R<a class="anchor" aria-label="anchor" href="#working-with-prompts-in-r"></a>
</h3>
<p>Example of how to enter a prompt.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prompt</span> <span class="op">&lt;-</span> <span class="st">"Evaluate the following study based on the selection criteria</span></span>
<span><span class="st">for a systematic review on the effects of family-based interventions on drug </span></span>
<span><span class="st">abuse reduction for young people in treatment for non-opioid drug use.</span></span>
<span><span class="st">A family-based intervention (FFT) is equivalent to a behavior focused</span></span>
<span><span class="st">family therapy, where young peopleâ€™s drug use is understood in relation to </span></span>
<span><span class="st">family behavior problems. Family-based interventions also includes manual-based </span></span>
<span><span class="st">family therapies as it targets young people and their families as a system </span></span>
<span><span class="st">throughout treatment, and thereby recognizes the important role of the family </span></span>
<span><span class="st">system in the development and treatment of young peopleâ€™s drug use problems. </span></span>
<span><span class="st">FFT was developed in the late 1980s on request from the US National Institute on</span></span>
<span><span class="st">Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the </span></span>
<span><span class="st">alcohol abuse program Community Reinforcement Approach (CRA), which was aimed </span></span>
<span><span class="st">at restructuring the environment to reinforce non-alcohol associated activities. </span></span>
<span><span class="st">FFT developed to have more emphasis on contingency contracting, impulse control </span></span>
<span><span class="st">strategies specific to drug use, and increased emphasis on involvement of family </span></span>
<span><span class="st">members in treatment. FFT is designed to accommodate diverse populations of </span></span>
<span><span class="st">youths with a variety of behavioral, cultural and individual preferences. </span></span>
<span><span class="st">FFT has evolved for use in severe behavioral disturbances known to co-exist with</span></span>
<span><span class="st">substance use and dependence, and the core interventions have been enhanced to </span></span>
<span><span class="st">address several mental health related problems commonly occurring</span></span>
<span><span class="st">as comorbid conditions in drug use treatment participant.  For each study,</span></span>
<span><span class="st">I would like you to assess:  1) Is the study about a family-based intervention,</span></span>
<span><span class="st">such as Functional Family Therapy, Multidimensional Family Therapy, or</span></span>
<span><span class="st">Behavioral Family Therapy? (Outpatient manual-based interventions of any</span></span>
<span><span class="st">duration delivered to young people and their families). If not, exclude study.</span></span>
<span><span class="st">2) Are the participants in outpatient drug treatment primarily</span></span>
<span><span class="st">for non-opioid drug use? 3) Are the participants within age 11â€“21?"</span></span></code></pre></div>
<p>Can also be done in word</p>
<p>Â </p>
<div class="figure">
<img src="helper-stuff/wordprompt1.png" alt="*Figure 4 - Prompt 1: With three inclusion critera.*" width="100%"><p class="caption">
<em>Figure 4 - Prompt 1: With three inclusion critera.</em>
</p>
</div>
<p>Â </p>
<p>Â </p>
<div class="figure">
<img src="helper-stuff/wordprompt2.png" alt="*Figure 5 - Prompt 2: With one inclusion criterion only.*" width="100%"><p class="caption">
<em>Figure 5 - Prompt 2: With one inclusion criterion only.</em>
</p>
</div>
<p>Â </p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">word_path</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"word_prompt_1.docx"</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prompt1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">readtext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="va">word_path</span><span class="op">)</span><span class="op">$</span><span class="va">text</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prompt1</span></span>
<span><span class="co">#&gt; [1] "Evaluate the following study based on the selection criteria for a systematic review on the effects of family-based interventions on drug abuse reduction for young people in treatment for non-opioid drug use. A family-based intervention (FFT) is equivalent to a behavior focused family therapy, where young peopleâ€™s drug use is understood in relation to family behavior problems. Family-based interventions also include manual-based family therapies as it target young people and their families as a system throughout treatment, and thereby recognize the important role of the family system in the development and treatment of young peopleâ€™s drug use problems. FFT was developed in the late 1980s on request from the US National Institute on Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the alcohol abuse program Community Reinforcement Approach (CRA), which was aimed at restructuring the environment to reinforce non-alcohol associated activities. FFT was developed to have more emphasis on contingency contracting, impulse control strategies specific to drug use, and increased emphasis on the involvement of family members in treatment. FFT is designed to accommodate diverse populations of youths with a variety of behavioral, cultural and individual preferences. FFT has evolved for use in severe behavioral disturbances known to co-exist with substance use and dependence, and the core interventions have been enhanced to address several mental health related problems commonly occurring as comorbid conditions in drug use treatment participant.  For each study, I would like you to assess:  1) Is the study about a family-based intervention, such as Functional Family Therapy, Multidimensional Family Therapy, or Behavioral Family Therapy? (Outpatient manual-based interventions of any duration delivered to young people and their families). If not, exclude study. 2) Are the participants in outpatient drug treatment primarily for non-opioid drug use? 3) Are the participants within age 11â€“21?"</span></span>
<span></span>
<span><span class="co"># Working with multiple prompts</span></span>
<span><span class="va">word_paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"word_prompt_1.docx"</span>, <span class="st">"word_prompt_2.docx"</span><span class="op">)</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prompts</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span></span>
<span>    <span class="va">word_paths</span>, <span class="op">~</span> <span class="op">{</span></span>
<span>      <span class="fu">readtext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">$</span><span class="va">text</span> <span class="op">|&gt;</span> </span>
<span>        <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span> </span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">prompts</span> </span>
<span><span class="co">#&gt; [1] "Evaluate the following study based on the selection criteria for a systematic review on the effects of family-based interventions on drug abuse reduction for young people in treatment for non-opioid drug use. A family-based intervention (FFT) is equivalent to a behavior focused family therapy, where young peopleâ€™s drug use is understood in relation to family behavior problems. Family-based interventions also include manual-based family therapies as it target young people and their families as a system throughout treatment, and thereby recognize the important role of the family system in the development and treatment of young peopleâ€™s drug use problems. FFT was developed in the late 1980s on request from the US National Institute on Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the alcohol abuse program Community Reinforcement Approach (CRA), which was aimed at restructuring the environment to reinforce non-alcohol associated activities. FFT was developed to have more emphasis on contingency contracting, impulse control strategies specific to drug use, and increased emphasis on the involvement of family members in treatment. FFT is designed to accommodate diverse populations of youths with a variety of behavioral, cultural and individual preferences. FFT has evolved for use in severe behavioral disturbances known to co-exist with substance use and dependence, and the core interventions have been enhanced to address several mental health related problems commonly occurring as comorbid conditions in drug use treatment participant.  For each study, I would like you to assess:  1) Is the study about a family-based intervention, such as Functional Family Therapy, Multidimensional Family Therapy, or Behavioral Family Therapy? (Outpatient manual-based interventions of any duration delivered to young people and their families). If not, exclude study. 2) Are the participants in outpatient drug treatment primarily for non-opioid drug use? 3) Are the participants within age 11â€“21?"</span></span>
<span><span class="co">#&gt; [2] "Evaluate the following study based on the selection criteria for a systematic review on the effects of family-based interventions on drug abuse reduction for young people in treatment for non-opioid drug use. A family-based intervention (FFT) is equivalent to a behavior focused family therapy, where young peopleâ€™s drug use is understood in relation to family behavior problems. Family-based interventions also include manual-based family therapies as it target young people and their families as a system throughout treatment, and thereby recognize the important role of the family system in the development and treatment of young peopleâ€™s drug use problems. FFT was developed in the late 1980s on request from the US National Institute on Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the alcohol abuse program Community Reinforcement Approach (CRA), which was aimed at restructuring the environment to reinforce non-alcohol associated activities. FFT was developed to have more emphasis on contingency contracting, impulse control strategies specific to drug use, and increased emphasis on the involvement of family members in treatment. FFT is designed to accommodate diverse populations of youths with a variety of behavioral, cultural and individual preferences. FFT has evolved for use in severe behavioral disturbances known to co-exist with substance use and dependence, and the core interventions have been enhanced to address several mental health related problems commonly occurring as comorbid conditions in drug use treatment participant.  For each study, I would like you to assess:  1) Is the study about a family-based intervention, such as Functional Family Therapy, Multidimensional Family Therapy, or Behavioral Family Therapy? (Outpatient manual-based interventions of any duration delivered to young people and their families). If not, exclude study. "</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retrieve-rate-limit-information">Retrieve rate limit information<a class="anchor" aria-label="anchor" href="#retrieve-rate-limit-information"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Rate limits across one model (Default is "gpt-3.5-turbo-0613")</span></span>
<span><span class="va">rate_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rate_limits_per_minute.html">rate_limits_per_minute</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">rate_limits</span></span>
<span><span class="co">#&gt; # A tibble: 1 Ã— 3</span></span>
<span><span class="co">#&gt;   model              requests_per_minute tokens_per_minute</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                            &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 gpt-3.5-turbo-0613               10000           1000000</span></span>
<span></span>
<span></span>
<span><span class="co"># Rate limits overview across multiple models</span></span>
<span><span class="co"># Add further models if necessary</span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">models_rate_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rate_limits_per_minute.html">rate_limits_per_minute</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">models</span><span class="op">)</span> </span>
<span><span class="va">models_rate_limits</span></span>
<span><span class="co">#&gt; # A tibble: 2 Ã— 3</span></span>
<span><span class="co">#&gt;   model              requests_per_minute tokens_per_minute</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                            &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 gpt-3.5-turbo-0613               10000           1000000</span></span>
<span><span class="co">#&gt; 2 gpt-4                              200             10000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="approximate-price-of-screening">Approximate price of screening<a class="anchor" aria-label="anchor" href="#approximate-price-of-screening"></a>
</h3>
<p>Approximate price of screening</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">app_obj</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/approximate_price_gpt.html">approximate_price_gpt</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">filges2015_dat</span>, <span class="co"># Tutorial data embedded in the package</span></span>
<span>    prompt <span class="op">=</span> <span class="va">prompts</span>, </span>
<span>    studyid <span class="op">=</span> <span class="va">studyid</span>, <span class="co"># indicate the variable with the studyid in the data</span></span>
<span>    title <span class="op">=</span> <span class="va">title</span>, <span class="co"># indicate the variable with the titles in the data</span></span>
<span>    abstract <span class="op">=</span> <span class="va">abstract</span>, <span class="co"># indicate the variable with the abstracts in the data</span></span>
<span>    model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span>,</span>
<span>    reps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    top_p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">app_obj</span></span>
<span><span class="co">#&gt; The approximate price of the (simple) screening will be around $56.1356.</span></span>
<span></span>
<span><span class="va">app_obj</span><span class="op">$</span><span class="va">price_dollar</span></span>
<span><span class="co">#&gt; [1] 56.1356</span></span>
<span><span class="va">app_obj</span><span class="op">$</span><span class="va">price_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 5</span></span></span>
<span><span class="co">#&gt;   model              iterations input_price_dollar output_price_dollar</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> gpt-3.5-turbo-0613          1              1.778             0.023<span style="text-decoration: underline;">76</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> gpt-3.5-turbo-0613         10             17.80              0.237<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> gpt-4                       1             35.59              0.712<span style="text-decoration: underline;">8</span> </span></span>
<span><span class="co">#&gt;   total_price_dollar</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>              1.802</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>             18.03 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>             36.30</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="screening-titles-and-abstracts">Screening titles and abstracts<a class="anchor" aria-label="anchor" href="#screening-titles-and-abstracts"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span></span>
<span><span class="va">reps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">rpm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">10000</span>, <span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_object</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/tabscreen_gpt.html">tabscreen_gpt</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">filges2015_dat</span>, <span class="co"># ris-file data create above </span></span>
<span>    prompt <span class="op">=</span> <span class="va">prompt</span>, <span class="co"># indicate name of the loaded prompt object</span></span>
<span>    studyid <span class="op">=</span> <span class="va">studyid</span>, <span class="co"># indicate the variable with the studyid in the data</span></span>
<span>    title <span class="op">=</span> <span class="va">title</span>, <span class="co"># indicate the variable with the titles in the data</span></span>
<span>    abstract <span class="op">=</span> <span class="va">abstract</span>, <span class="co"># indicate the variable with the abstracts in the data,</span></span>
<span>    model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span>,</span>
<span>    reps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    rpm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">10000</span>, <span class="fl">200</span><span class="op">)</span>,</span>
<span>    top_p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; * The approximate price of the current (simple) screening will be around $27.9901.</span></span>
<span><span class="co">#&gt; * Consider removing references that has no abstract since these can distort the accuracy of the screening</span></span>
<span><span class="co">#&gt;  Progress: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 100%</span></span>
<span><span class="co">#&gt;  * NOTE: Requests failed 4 times."</span></span>
<span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">sequential</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_object</span><span class="op">)</span></span>
<span><span class="co">#&gt; Find data with all answers by executing</span></span>
<span><span class="co">#&gt;  result_object$answer_data_all</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find data with the result aggregated across multiple answers by executing</span></span>
<span><span class="co">#&gt;  result_object$answer_data_sum</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find total price for the screening by executing</span></span>
<span><span class="co">#&gt;  result_object$price_dollar</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find error data by executing</span></span>
<span><span class="co">#&gt;  result_object$error_data</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="screen-failed-requests">Screen failed requests<a class="anchor" aria-label="anchor" href="#screen-failed-requests"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result_object</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/screen_errors.html">screen_errors</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_object</span><span class="op">)</span></span>
<span><span class="co">#&gt; Find data with all answers by executing</span></span>
<span><span class="co">#&gt;  result_object$answer_data_all</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find data with the result aggregated across multiple answers by executing</span></span>
<span><span class="co">#&gt;  result_object$answer_data_sum</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find total price for the screening by executing</span></span>
<span><span class="co">#&gt;  result_object$price_dollar</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-the-results-from-the-screening">Getting the results from the screening<a class="anchor" aria-label="anchor" href="#getting-the-results-from-the-screening"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gpt-3.5 results (prompt 1, top_p = 1, 10 replications)</span></span>
<span><span class="co"># studyid = 21 is not included since it failed during the loop</span></span>
<span><span class="co"># I show how to recover this in another </span></span>
<span><span class="va">sum_dat_gpt3</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span><span class="op">$</span><span class="va">answer_data_sum</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">model</span>, <span class="st">"3"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">promptid</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">reps</span> <span class="op">==</span> <span class="fl">10</span> <span class="op">&amp;</span> <span class="va">top_p</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># gpt-4 results (prompt 1, top_p = 1)</span></span>
<span><span class="va">sum_dat_gpt4</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span><span class="op">$</span><span class="va">answer_data_sum</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">model</span>, <span class="st">"4"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">promptid</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">top_p</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analyzing-the-screening">Analyzing the screening<a class="anchor" aria-label="anchor" href="#analyzing-the-screening"></a>
</h3>
<div class="section level4">
<h4 id="simple-table">Simple table<a class="anchor" aria-label="anchor" href="#simple-table"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gpt3.5 result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span>gpt <span class="op">=</span> <span class="va">sum_dat_gpt3</span><span class="op">$</span><span class="va">final_decision_gpt_num</span>, human <span class="op">=</span> <span class="va">sum_dat_gpt3</span><span class="op">$</span><span class="va">human_code</span><span class="op">)</span></span>
<span><span class="co">#&gt;    human</span></span>
<span><span class="co">#&gt; gpt  0  1</span></span>
<span><span class="co">#&gt;   0 82  4</span></span>
<span><span class="co">#&gt;   1  8 41</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span>gpt <span class="op">=</span> <span class="va">sum_dat_gpt4</span><span class="op">$</span><span class="va">final_decision_gpt_num</span>, human <span class="op">=</span> <span class="va">sum_dat_gpt4</span><span class="op">$</span><span class="va">human_code</span><span class="op">)</span></span>
<span><span class="co">#&gt;    human</span></span>
<span><span class="co">#&gt; gpt  0  1</span></span>
<span><span class="co">#&gt;   0 84  0</span></span>
<span><span class="co">#&gt;   1  6 45</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="false-included-and-excluded-by-gpt">False included and excluded (by gpt)<a class="anchor" aria-label="anchor" href="#false-included-and-excluded-by-gpt"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">screen_perform</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/screen_analyzer.html">screen_analyzer</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">screen_perform</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 Ã— 25</span></span></span>
<span><span class="co">#&gt;    promptid model         reps top_p n_refs n_screened n_missing human_in_gpt_ex</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        1 gpt-3.5-turâ€¦     1 0.001    135        135         0               8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        1 gpt-3.5-turâ€¦    10 0.001    135        135         0               8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        1 gpt-3.5-turâ€¦     1 1        135        135         0              11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        1 gpt-3.5-turâ€¦    10 1        135        135         0               4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        1 gpt-4            1 0.001    135        135         0               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        1 gpt-4            1 1        135        135         0               0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        2 gpt-3.5-turâ€¦     1 0.001    135        135         0               9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        2 gpt-3.5-turâ€¦    10 0.001    135        135         0               8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        2 gpt-3.5-turâ€¦     1 1        135        135         0              10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        2 gpt-3.5-turâ€¦    10 1        135        135         0               7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        2 gpt-4            1 0.001    135        135         0               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>        2 gpt-4            1 1        135        135         0               2</span></span>
<span><span class="co">#&gt;    human_ex_gpt_in human_in_gpt_in human_ex_gpt_ex accuracy p_agreement</span></span>
<span><span class="co">#&gt;              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>               8              37              82  0.118<span style="text-decoration: underline;">5</span>       0.881<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>               8              37              82  0.118<span style="text-decoration: underline;">5</span>       0.881<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>               8              34              82  0.140<span style="text-decoration: underline;">7</span>       0.859<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>               8              41              82  0.088<span style="text-decoration: underline;">89</span>      0.911<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>               9              44              81  0.074<span style="text-decoration: underline;">07</span>      0.925<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>               6              45              84  0.044<span style="text-decoration: underline;">44</span>      0.955<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>               6              36              84  0.111<span style="text-decoration: underline;">1</span>       0.888<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>               7              37              83  0.111<span style="text-decoration: underline;">1</span>       0.888<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>               6              35              84  0.118<span style="text-decoration: underline;">5</span>       0.881<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>               7              38              83  0.103<span style="text-decoration: underline;">7</span>       0.896<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>               8              44              82  0.066<span style="text-decoration: underline;">67</span>      0.933<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>               7              43              83  0.066<span style="text-decoration: underline;">67</span>      0.933<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt;    precision recall    npv specificity   bacc     F2    mcc    irr   se_irr</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    0.822<span style="text-decoration: underline;">2</span> 0.822<span style="text-decoration: underline;">2</span> 0.911<span style="text-decoration: underline;">1</span>      0.911<span style="text-decoration: underline;">1</span> 0.866<span style="text-decoration: underline;">7</span> 0.513<span style="text-decoration: underline;">9</span> 0.866<span style="text-decoration: underline;">7</span> 0.733<span style="text-decoration: underline;">3</span> 0.012<span style="text-decoration: underline;">36</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    0.822<span style="text-decoration: underline;">2</span> 0.822<span style="text-decoration: underline;">2</span> 0.911<span style="text-decoration: underline;">1</span>      0.911<span style="text-decoration: underline;">1</span> 0.866<span style="text-decoration: underline;">7</span> 0.513<span style="text-decoration: underline;">9</span> 0.866<span style="text-decoration: underline;">7</span> 0.733<span style="text-decoration: underline;">3</span> 0.012<span style="text-decoration: underline;">36</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    0.809<span style="text-decoration: underline;">5</span> 0.755<span style="text-decoration: underline;">6</span> 0.881<span style="text-decoration: underline;">7</span>      0.911<span style="text-decoration: underline;">1</span> 0.833<span style="text-decoration: underline;">3</span> 0.488<span style="text-decoration: underline;">5</span> 0.839<span style="text-decoration: underline;">4</span> 0.678<span style="text-decoration: underline;">0</span> 0.013<span style="text-decoration: underline;">08</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    0.836<span style="text-decoration: underline;">7</span> 0.911<span style="text-decoration: underline;">1</span> 0.953<span style="text-decoration: underline;">5</span>      0.911<span style="text-decoration: underline;">1</span> 0.911<span style="text-decoration: underline;">1</span> 0.545<span style="text-decoration: underline;">2</span> 0.903<span style="text-decoration: underline;">0</span> 0.804<span style="text-decoration: underline;">3</span> 0.011<span style="text-decoration: underline;">13</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    0.830<span style="text-decoration: underline;">2</span> 0.977<span style="text-decoration: underline;">8</span> 0.987<span style="text-decoration: underline;">8</span>      0.9    0.938<span style="text-decoration: underline;">9</span> 0.561<span style="text-decoration: underline;">2</span> 0.923<span style="text-decoration: underline;">7</span> 0.840<span style="text-decoration: underline;">4</span> 0.010<span style="text-decoration: underline;">46</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    0.882<span style="text-decoration: underline;">4</span> 1      1           0.933<span style="text-decoration: underline;">3</span> 0.966<span style="text-decoration: underline;">7</span> 0.585<span style="text-decoration: underline;">9</span> 0.953<span style="text-decoration: underline;">7</span> 0.903<span style="text-decoration: underline;">2</span> 0.008<span style="text-decoration: underline;">146</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    0.857<span style="text-decoration: underline;">1</span> 0.8    0.903<span style="text-decoration: underline;">2</span>      0.933<span style="text-decoration: underline;">3</span> 0.866<span style="text-decoration: underline;">7</span> 0.517<span style="text-decoration: underline;">2</span> 0.873<span style="text-decoration: underline;">4</span> 0.745<span style="text-decoration: underline;">8</span> 0.011<span style="text-decoration: underline;">82</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    0.840<span style="text-decoration: underline;">9</span> 0.822<span style="text-decoration: underline;">2</span> 0.912<span style="text-decoration: underline;">1</span>      0.922<span style="text-decoration: underline;">2</span> 0.872<span style="text-decoration: underline;">2</span> 0.519<span style="text-decoration: underline;">7</span> 0.874<span style="text-decoration: underline;">4</span> 0.748<span style="text-decoration: underline;">6</span> 0.011<span style="text-decoration: underline;">95</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    0.853<span style="text-decoration: underline;">7</span> 0.777<span style="text-decoration: underline;">8</span> 0.893<span style="text-decoration: underline;">6</span>      0.933<span style="text-decoration: underline;">3</span> 0.855<span style="text-decoration: underline;">6</span> 0.508<span style="text-decoration: underline;">7</span> 0.864<span style="text-decoration: underline;">5</span> 0.727<span style="text-decoration: underline;">3</span> 0.012<span style="text-decoration: underline;">09</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    0.844<span style="text-decoration: underline;">4</span> 0.844<span style="text-decoration: underline;">4</span> 0.922<span style="text-decoration: underline;">2</span>      0.922<span style="text-decoration: underline;">2</span> 0.883<span style="text-decoration: underline;">3</span> 0.527<span style="text-decoration: underline;">8</span> 0.883<span style="text-decoration: underline;">3</span> 0.766<span style="text-decoration: underline;">7</span> 0.011<span style="text-decoration: underline;">66</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>    0.846<span style="text-decoration: underline;">2</span> 0.977<span style="text-decoration: underline;">8</span> 0.988<span style="text-decoration: underline;">0</span>      0.911<span style="text-decoration: underline;">1</span> 0.944<span style="text-decoration: underline;">4</span> 0.567<span style="text-decoration: underline;">0</span> 0.930<span style="text-decoration: underline;">5</span> 0.855<span style="text-decoration: underline;">6</span> 0.009<span style="text-decoration: underline;">913</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>    0.86   0.955<span style="text-decoration: underline;">6</span> 0.976<span style="text-decoration: underline;">5</span>      0.922<span style="text-decoration: underline;">2</span> 0.938<span style="text-decoration: underline;">9</span> 0.565<span style="text-decoration: underline;">8</span> 0.928<span style="text-decoration: underline;">4</span> 0.854<span style="text-decoration: underline;">1</span> 0.009<span style="text-decoration: underline;">807</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ 3 more variables: cl_irr &lt;dbl&gt;, cu_irr &lt;dbl&gt;, level_of_agreement &lt;chr&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="getting-detailed-descriptions">Getting detailed descriptions<a class="anchor" aria-label="anchor" href="#getting-detailed-descriptions"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show example with gpt-4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Gartlehner, G., Wagner, G., Lux, L. et al.Â (2019). Assessing the
accuracy of machine-assisted abstract screening with DistillerAI: a user
study. <em>Systematic Reviews</em>. 8, 1-10. <a href="https://doi.org/10.1186/s13643-019-1221-3" class="external-link uri">https://doi.org/10.1186/s13643-019-1221-3</a></p>
<p>McHugh, M. L. (2012). Interrater reliability: The kappa statistic.
<em>Biochemia Medica</em>, 22(3), 276â€“282.</p>
<p>Syriani, E., David, I., &amp; Kumar, G. (2023). Assessing the Ability
of ChatGPT to Screen Articles for Systematic Reviews. <em>ArXiv Preprint
ArXiv:2307.06464.</em> <a href="https://arxiv.org/pdf/2307.06464.pdf" class="external-link uri">https://arxiv.org/pdf/2307.06464.pdf</a></p>
<p>Waffenschmidt, S., Knelangen, M., Sieben, W., BÃ¼hn, S., &amp; Pieper,
D. (2019). Single screening versus conventional double screening for
study selection in systematic reviews: a methodological systematic
review. <em>BMC Medical Research Methodology</em> 19, 1-9. <a href="https://doi.org/10.1186/s12874-019-0782-0" class="external-link uri">https://doi.org/10.1186/s12874-019-0782-0</a></p>
<p>Westgate MJ (2019). revtools: An R package to support article
screening for evidence synthesis. <em>Research Synthesis Methods</em>.
<a href="https://doi.org/10.1002/jrsm.1374" class="external-link uri">https://doi.org/10.1002/jrsm.1374</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mikkel H. Vembye.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
