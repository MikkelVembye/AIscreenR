<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="AIscreenR">
<title>Using ChatGPT for Title and Abstract Screening in Systematic Reviews • AIscreenR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using ChatGPT for Title and Abstract Screening in Systematic Reviews">
<meta property="og:description" content="AIscreenR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">AIscreenR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9010</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Using-ChatGPT-For-Screening.html">Using ChatGPT for Title and Abstract Screening in Systematic Reviews</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MikkelVembye/AIscreenR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Using ChatGPT for Title and Abstract Screening in Systematic Reviews</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MikkelVembye/AIscreenR/blob/HEAD/vignettes/Using-ChatGPT-For-Screening.Rmd" class="external-link"><code>vignettes/Using-ChatGPT-For-Screening.Rmd</code></a></small>
      <div class="d-none name"><code>Using-ChatGPT-For-Screening.Rmd</code></div>
    </div>

    
    
<div class="warning" style="margin-left:2em; margin-right:2em; margin-bottom:2em; margin-top:2em; padding:0.1em; background-color: #d7dbdd; border: solid #bdc3c7 3px">
<span>
<p style="margin-top:1em; text-align:center">
<b>Important note</b>
</p>
<p style="margin:1em">
This vignette represent tentative work-in-progress only. The general
applicability and efficacy of using large-language models (LLMs)
including ChatGPT for title and abstract screening in literature reviews
are still unknown. Our first results suggest that ChatGPT can be a
reliable second screener when reviewing specific and well defined
interventions. The first evidence of this is shown in this vignette.
However, be aware that our first results are based on a retrospective
analysis which might not generalize to prospective screenings where
ChatGPT potentially has not been trained on that reference data, that is
data added to the internet after 2021. Also note that the result
presented here are for tutorial purposes only. Hard inferences about the
relative efficacy of the used gpt models should be avoided.
</p>
<p></p></span>
</div>
<p>An all-important step to ensure the quality of systematic reviews
involves detecting all relevant references related to the literature
under review. Usually, this involves independent double screening of all
references detected in relevant databases and literature with two human
screeners. This procedure has shown pivotal since less experienced
single screeners tend to miss around 13 % relavant studies (with 5 % for
experienced screeners), which in most cases substantially change the
main review findings (Waffenschmidt, 2019). Yet, double-screening is a
costly and resource intensive procedure, excluding many researchers from
using it. An alternative to human double-screening is to use automated
tools to act as the second screener (Gartlehner et al., 2019; van de
Schoot et al. 2021). Hereto, most evaluations of existing tools finds
that most automated tools fail to reliably act as/imitating a human
second screener. Meanwhile, it is still unknown how well or if the newly
developed large-language models (LLMs) such as ChatGPT can work and
possibly emulate a human second screener. The aim of the
<code>AIscreenR</code> package is to support the use and testing of
ChatGPT as a the second screener or alternatively to reduce research
waste. Concretely the package allows user to apply the gpt models from
the <a href="https://platform.openai.com/docs/models/model-endpoint-compatibility" class="external-link">https://api.openai.com/v1/chat/completions</a>
endpoint. In future developments, we expect to add further LLMs (such as
Bard) when APIs are available for those LLMs. For now, we invite other
researchers to test this software so that we as a review community can
get a better understanding of the performance of the gpt models from
OpenAI as second screeners. In this vignette, we show how a title and
abstract screening with ChatGPT can be done in R. The advantages of
conducting the screening with ChatGPT via R is 1) that reviewers can
easily work with a large number of references, avoiding copy-paste
procedures, 2) that the total screening time can be substantially
increased relative to using the ChatGPT interface, and 3) that
consistency between gpt answer for the same title and abstract can
easily be tested. In this vignette, we also show the first proof of
concept for the use of ChatGPT as a reliable second screener. This goes
without saying that ChatGPT works in all cases, and we think the tool
should be use carefully and should always assisted by a human
(human-in-the-loop). Consequently, we do not recommend to use the the
ChatGPT as a single screener.</p>
<div class="section level3">
<h3 id="getting-started-loading-relevant-ris-file-data-for-screening">Getting started: Loading relevant ris file data for screening<a class="anchor" aria-label="anchor" href="#getting-started-loading-relevant-ris-file-data-for-screening"></a>
</h3>
<p>At this stage, we expect that you have a pile of ris-files,
containing titles and abstract for the references you would like to
screen. You can retrieve ris-files in several ways, either directly from
research database, a Google Scholar search, or exported from your
reference management tool, such as EndNote, Mendeley, and RefMan.
Alternatively, you can export ris-file from systematic software tool
such as <a href="https://eppi.ioe.ac.uk/EPPIReviewer-Web/home" class="external-link">EPPI-reviewer</a>,
<a href="https://www.covidence.org/" class="external-link">Covidence</a>, <a href="https://www.metareviewer.org/landing/index.html" class="external-link">MetaReviewer</a>,
and <a href="https://revtools.net/" class="external-link"><code>revtools</code></a>, or
whatever software you like. In the example given below, we load
ris-files extracted from the EPPI-reviewer. A minor advantage of
extracting ris-files from systematic software tools is that they add a
unique study ID for each reference. This feature makes it easier to keep
track of the screening. Yet, such ID can be generated in R as well, and
is automatically generated in the <code><a href="../reference/tabscreen_gpt.html">tabscreen_gpt()</a></code> function
when unique IDs are not provided. When using ChatGPT as the second
screener, we recommend that the human screening has been done before
uploading to R. Thereby, it is possible to compare the screenings
instantly after the computer screening has been done. In the below
example we load ris-files separately for excluded and included
ris-files, respectively, and add the <code>human_code</code> variable
that tracks the human decision.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading packages </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mikkelvembye.github.io/AIscreenR/">AIscreenR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://revtools.net" class="external-link">revtools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Loading excluded studies</span></span>
<span><span class="co"># Reading path to risfiles</span></span>
<span><span class="va">excl_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"excl_tutorial.ris"</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ris_dat_excl</span> <span class="op">&lt;-</span> <span class="fu">revtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/revtools/man/read_bibliograpy.html" class="external-link">read_bibliography</a></span><span class="op">(</span><span class="va">excl_path</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">eppi_id</span>, <span class="va">title</span>, <span class="va">abstract</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># Using only relevant variables</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    human_code <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Loading included studies</span></span>
<span><span class="va">incl_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"incl_tutorial.ris"</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ris_dat_incl</span> <span class="op">&lt;-</span> <span class="fu">revtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/revtools/man/read_bibliograpy.html" class="external-link">read_bibliography</a></span><span class="op">(</span><span class="va">incl_path</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">eppi_id</span>, <span class="va">title</span>, <span class="va">abstract</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    human_code <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">filges2015_dat</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">ris_dat_excl</span>, <span class="va">ris_dat_incl</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    studyid <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">studyid</span>, .after <span class="op">=</span> <span class="va">eppi_id</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">filges2015_dat</span></span>
<span><span class="co">#&gt; # A tibble: 150 × 6</span></span>
<span><span class="co">#&gt;    author                              eppi_id studyid title abstract human_code</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                               &lt;chr&gt;     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Holloway R G and Gramling R and Ke… 9434957       1 Esti… "Progno…          0</span></span>
<span><span class="co">#&gt;  2 Morawska Alina and Stallman Helen … 9433838       2 Self… "Behavi…          0</span></span>
<span><span class="co">#&gt;  3 Michel C M and Pascual-Marqui R D … 9431171       3 Freq… "The to…          0</span></span>
<span><span class="co">#&gt;  4 Paul Howard A                       9433968       4 A Re… "The ar…          0</span></span>
<span><span class="co">#&gt;  5 Feinberg I and De Bie E and Davis … 9434460       5 Topo… "STUDY …          0</span></span>
<span><span class="co">#&gt;  6 Hamburg Sam R                       9433554       6 BOOK… "The ar…          0</span></span>
<span><span class="co">#&gt;  7 Park H Y and Lee B J and Kim J H a… 9435130       7 Rapi… "Backgr…          0</span></span>
<span><span class="co">#&gt;  8 Petrek J                            9432040       8 Pict… "AIMS: …          0</span></span>
<span><span class="co">#&gt;  9 Schwartzman Meredith P and Wahler … 9434093       9 Enha… "New an…          0</span></span>
<span><span class="co">#&gt; 10 Faber J and Srutova L and Pilarova… 9431505      10 EEG … "Sponta…          0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-api-key-openai">Getting API key OpenAI<a class="anchor" aria-label="anchor" href="#getting-api-key-openai"></a>
</h3>
<p>Before you can use the functions from <code>AIscreenR</code>, you
must generate your own secret API key. To do so you must first ensure
that you have created an account at OpenAI (<em>if you have not done so
at this stage, you can sign up <a href="https://auth0.openai.com/u/login/identifier?state=hKFo2SBqQjNHSlc1ejIyREpUb01hdDF2OHEzQy12NnJwWlFUN6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIEJSOWJaamdKLWswNGlfWDQ2NER1OXJmVUNpVmVzVjZfo2NpZNkgRFJpdnNubTJNdTQyVDNLT3BxZHR3QjNOWXZpSFl6d0Q" class="external-link">here</a>).</em>
When having an account, go to <a href="https://platform.openai.com/account/api-keys" class="external-link">https://platform.openai.com/account/api-keys</a>
and press the <code>+ Create new secret key</code> button (see picture
below) and give your key a name.</p>
<p> </p>
<p><img src="helper-stuff/API_key_pic.png" width="100%">  </p>
<p>When you have generate your secret API key, remember to store it
safely since you will not be able see it again. <strong>NOTE</strong>:
<em>If you lose your API key, you can just generate a new one</em>.</p>
</div>
<div class="section level3">
<h3 id="handling-your-api-key">Handling your API key<a class="anchor" aria-label="anchor" href="#handling-your-api-key"></a>
</h3>
<div class="section level4">
<h4 id="temporary-solution">Temporary solution<a class="anchor" aria-label="anchor" href="#temporary-solution"></a>
</h4>
<p>TO BE DONE</p>
</div>
<div class="section level4">
<h4 id="pemanent-solution">Pemanent solution<a class="anchor" aria-label="anchor" href="#pemanent-solution"></a>
</h4>
<p>To add your API key permanently as an environment variables, you can
execute <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>.</p>
<p> </p>
<p><img src="helper-stuff/Renviron.png" width="100%">  </p>
<p>After entering the API key, save the <code>.Renviron</code> document
and restart <code>RStudio</code> (ctrl + shift + F10).</p>
</div>
</div>
<div class="section level3">
<h3 id="retrieve-rate-limit-information">Retrieve rate limit information<a class="anchor" aria-label="anchor" href="#retrieve-rate-limit-information"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Rate limits across one model (Default is "gpt-3.5-turbo-0613")</span></span>
<span><span class="va">rate_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rate_limits_per_minute.html">rate_limits_per_minute</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">rate_limits</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;   model              requests_per_minute tokens_per_minute</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                            &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 gpt-3.5-turbo-0613               10000           1000000</span></span>
<span></span>
<span></span>
<span><span class="co"># Rate limits overview across multiple models</span></span>
<span><span class="co"># Add further models if necessary</span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">models_rate_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rate_limits_per_minute.html">rate_limits_per_minute</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">models</span><span class="op">)</span> </span>
<span><span class="va">models_rate_limits</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   model              requests_per_minute tokens_per_minute</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                            &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 gpt-3.5-turbo-0613               10000           1000000</span></span>
<span><span class="co">#&gt; 2 gpt-4                              200             10000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-prompts-in-r">Working with prompts in R<a class="anchor" aria-label="anchor" href="#working-with-prompts-in-r"></a>
</h3>
<p>Example of how to enter a prompt.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prompt</span> <span class="op">&lt;-</span> <span class="st">"Evaluate the following study based on the selection criteria</span></span>
<span><span class="st">for a systematic review on the effects of family-based interventions on drug </span></span>
<span><span class="st">abuse reduction for young people in treatment for non-opioid drug use.</span></span>
<span><span class="st">A family-based intervention (FFT) is equivalent to a behavior focused</span></span>
<span><span class="st">family therapy, where young people’s drug use is understood in relation to </span></span>
<span><span class="st">family behavior problems. Family-based interventions also includes manual-based </span></span>
<span><span class="st">family therapies as it targets young people and their families as a system </span></span>
<span><span class="st">throughout treatment, and thereby recognizes the important role of the family </span></span>
<span><span class="st">system in the development and treatment of young people’s drug use problems. </span></span>
<span><span class="st">FFT was developed in the late 1980s on request from the US National Institute on</span></span>
<span><span class="st">Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the </span></span>
<span><span class="st">alcohol abuse program Community Reinforcement Approach (CRA), which was aimed </span></span>
<span><span class="st">at restructuring the environment to reinforce non-alcohol associated activities. </span></span>
<span><span class="st">FFT developed to have more emphasis on contingency contracting, impulse control </span></span>
<span><span class="st">strategies specific to drug use, and increased emphasis on involvement of family </span></span>
<span><span class="st">members in treatment. FFT is designed to accommodate diverse populations of </span></span>
<span><span class="st">youths with a variety of behavioral, cultural and individual preferences. </span></span>
<span><span class="st">FFT has evolved for use in severe behavioral disturbances known to co-exist with</span></span>
<span><span class="st">substance use and dependence, and the core interventions have been enhanced to </span></span>
<span><span class="st">address several mental health related problems commonly occurring</span></span>
<span><span class="st">as comorbid conditions in drug use treatment participant.  For each study,</span></span>
<span><span class="st">I would like you to assess:  1) Is the study about a family-based intervention,</span></span>
<span><span class="st">such as Functional Family Therapy, Multidimensional Family Therapy, or</span></span>
<span><span class="st">Behavioral Family Therapy? (Outpatient manual-based interventions of any</span></span>
<span><span class="st">duration delivered to young people and their families). If not, exclude study.</span></span>
<span><span class="st">2) Are the participants in outpatient drug treatment primarily</span></span>
<span><span class="st">for non-opioid drug use? 3) Are the participants within age 11–21?"</span></span></code></pre></div>
<p>Can also be done in word</p>
<p> </p>
<div class="figure">
<img src="helper-stuff/wordprompt1.png" alt="*Figure 3 - Prompt 1: With three inclusion critera.*" width="100%"><p class="caption">
<em>Figure 3 - Prompt 1: With three inclusion critera.</em>
</p>
</div>
<p> </p>
<p> </p>
<div class="figure">
<img src="helper-stuff/wordprompt2.png" alt="*Figure 4 - Prompt 2: With one inclusion criterion only.*" width="100%"><p class="caption">
<em>Figure 4 - Prompt 2: With one inclusion criterion only.</em>
</p>
</div>
<p> </p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">word_path</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"word_pormpt_1.docx"</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prompt1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">readtext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="va">word_path</span><span class="op">)</span><span class="op">$</span><span class="va">text</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">prompt</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (object, filename = NULL, name = NULL, ...)</span></span>
<span></span>
<span><span class="co"># Working with multiple prompts</span></span>
<span><span class="va">word_paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"word_pormpt_1.docx"</span>, <span class="st">"word_pormpt_2.docx"</span><span class="op">)</span>, package <span class="op">=</span> <span class="st">"AIscreenR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prompts</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span></span>
<span>    <span class="va">word_paths</span>, <span class="op">~</span> <span class="op">{</span></span>
<span>      <span class="fu">readtext</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">$</span><span class="va">text</span> <span class="op">|&gt;</span> </span>
<span>        <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span> </span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">prompts</span> </span>
<span><span class="co">#&gt; [1] "Evaluate the following study based on the selection criteria for a systematic review on the effects of family-based interventions on drug abuse reduction for young people in treatment for non-opioid drug use. A family-based intervention (FFT) is equivalent to a behavior focused family therapy, where young people’s drug use is understood in relation to family behavior problems. Family-based interventions also include manual-based family therapies as it target young people and their families as a system throughout treatment, and thereby recognize the important role of the family system in the development and treatment of young people’s drug use problems. FFT was developed in the late 1980s on request from the US National Institute on Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the alcohol abuse program Community Reinforcement Approach (CRA), which was aimed at restructuring the environment to reinforce non-alcohol associated activities. FFT was developed to have more emphasis on contingency contracting, impulse control strategies specific to drug use, and increased emphasis on the involvement of family members in treatment. FFT is designed to accommodate diverse populations of youths with a variety of behavioral, cultural and individual preferences. FFT has evolved for use in severe behavioral disturbances known to co-exist with substance use and dependence, and the core interventions have been enhanced to address several mental health related problems commonly occurring as comorbid conditions in drug use treatment participant.  For each study, I would like you to assess:  1) Is the study about a family-based intervention, such as Functional Family Therapy, Multidimensional Family Therapy, or Behavioral Family Therapy? (Outpatient manual-based interventions of any duration delivered to young people and their families). If not, exclude study. 2) Are the participants in outpatient drug treatment primarily for non-opioid drug use? 3) Are the participants within age 11–21?"</span></span>
<span><span class="co">#&gt; [2] "Evaluate the following study based on the selection criteria for a systematic review on the effects of family-based interventions on drug abuse reduction for young people in treatment for non-opioid drug use. A family-based intervention (FFT) is equivalent to a behavior focused family therapy, where young people’s drug use is understood in relation to family behavior problems. Family-based interventions also include manual-based family therapies as it target young people and their families as a system throughout treatment, and thereby recognize the important role of the family system in the development and treatment of young people’s drug use problems. FFT was developed in the late 1980s on request from the US National Institute on Drug Abuse (NIDA). The development of FFT was initially heavily inspired by the alcohol abuse program Community Reinforcement Approach (CRA), which was aimed at restructuring the environment to reinforce non-alcohol associated activities. FFT was developed to have more emphasis on contingency contracting, impulse control strategies specific to drug use, and increased emphasis on the involvement of family members in treatment. FFT is designed to accommodate diverse populations of youths with a variety of behavioral, cultural and individual preferences. FFT has evolved for use in severe behavioral disturbances known to co-exist with substance use and dependence, and the core interventions have been enhanced to address several mental health related problems commonly occurring as comorbid conditions in drug use treatment participant.  For each study, I would like you to assess:  1) Is the study about a family-based intervention, such as Functional Family Therapy, Multidimensional Family Therapy, or Behavioral Family Therapy? (Outpatient manual-based interventions of any duration delivered to young people and their families). If not, exclude study. "</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="approximate-price-of-screening">Approximate price of screening<a class="anchor" aria-label="anchor" href="#approximate-price-of-screening"></a>
</h3>
<p>Approximate price of screening</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span></span>
<span><span class="va">reps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">app_obj</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/approximate_price_gpt.html">approximate_price_gpt</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">filges2015_dat</span>, <span class="co"># Tutorial data embedded in the package</span></span>
<span>    prompt <span class="op">=</span> <span class="va">prompts</span>, </span>
<span>    studyid <span class="op">=</span> <span class="va">studyid</span>, <span class="co"># indicate the variable with the studyid in the data</span></span>
<span>    title <span class="op">=</span> <span class="va">title</span>, <span class="co"># indicate the variable with the titles in the data</span></span>
<span>    abstract <span class="op">=</span> <span class="va">abstract</span>, <span class="co"># indicate the variable with the abstracts in the data</span></span>
<span>    model <span class="op">=</span> <span class="va">models</span>,</span>
<span>    reps <span class="op">=</span> <span class="va">reps</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">app_obj</span></span>
<span><span class="co">#&gt; The approximate price of the (simple) screening will be around $15.5704.</span></span>
<span></span>
<span><span class="va">app_obj</span><span class="op">$</span><span class="va">price_dollar</span></span>
<span><span class="co">#&gt; [1] 15.5704</span></span>
<span><span class="va">app_obj</span><span class="op">$</span><span class="va">price_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#&gt;   model     iterations input_price_dollar output_price_dollar total_price_dollor</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> gpt-3.5-…          1              0.493              0.006<span style="text-decoration: underline;">6</span>              0.500</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> gpt-3.5-…         10              4.94               0.066               5.00 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> gpt-4              1              9.87               0.198              10.1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="screening-titles-and-abstracts">Screening titles and abstracts<a class="anchor" aria-label="anchor" href="#screening-titles-and-abstracts"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-3.5-turbo-0613"</span>, <span class="st">"gpt-4"</span><span class="op">)</span></span>
<span><span class="va">reps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">rpm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">10000</span>, <span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_object</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/tabscreen_gpt.html">tabscreen_gpt</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">filges2015_dat</span>, <span class="co"># ris-file data create above </span></span>
<span>    prompt <span class="op">=</span> <span class="va">prompt</span>, <span class="co"># indicate name of the loaded prompt object</span></span>
<span>    studyid <span class="op">=</span> <span class="va">studyid</span>, <span class="co"># indicate the variable with the studyid in the data</span></span>
<span>    title <span class="op">=</span> <span class="va">title</span>, <span class="co"># indicate the variable with the titles in the data</span></span>
<span>    abstract <span class="op">=</span> <span class="va">abstract</span>, <span class="co"># indicate the variable with the abstracts in the data,</span></span>
<span>    model <span class="op">=</span> <span class="va">models</span>,</span>
<span>    reps <span class="op">=</span> <span class="va">reps</span>,</span>
<span>    rpm <span class="op">=</span> <span class="va">rpm</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; * The approximate price of the current (simple) screening will be around $15.6473.</span></span>
<span><span class="co">#&gt; * Consider removing references that has no abstract since these can distort the accuracy of the screening</span></span>
<span><span class="co">#&gt;  Progress: ──────────────────────────────────────────────────────────────────────────────────────────── 100%</span></span>
<span><span class="co">#&gt;  * NOTE: Requests falied 6 times."</span></span>
<span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">sequential</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_object</span><span class="op">)</span></span>
<span><span class="co">#&gt; Find data with all answers by executing</span></span>
<span><span class="co">#&gt;  result_object$answer_data_all</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find data with the result aggregated across multiple answers by executing</span></span>
<span><span class="co">#&gt;  result_object$answer_data_sum</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find total price for the screening by executing</span></span>
<span><span class="co">#&gt;  result_object$price_dollor</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Find error data by executing</span></span>
<span><span class="co">#&gt;  result_object$error_data</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-the-results-from-the-screening">Getting the results from the screening<a class="anchor" aria-label="anchor" href="#getting-the-results-from-the-screening"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gpt-3.5 results (prompt 1 - 10 replications)</span></span>
<span><span class="co"># studyid = 21 is not included since it failed during the loop</span></span>
<span><span class="co"># I show how to recover this in another </span></span>
<span><span class="va">sum_dat_gpt3</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span><span class="op">$</span><span class="va">answer_data_sum</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">model</span>, <span class="st">"3"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">promptid</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">reps</span> <span class="op">==</span> <span class="fl">10</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sum_dat_gpt3</span>, width <span class="op">=</span> <span class="fl">220</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 149 × 16</span></span></span>
<span><span class="co">#&gt;    author                                                                       </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Holloway R G and Gramling R and Kelly A G                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Morawska Alina and Stallman Helen M and Sanders Matthew R and Ralph Alan     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Michel C M and Pascual-Marqui R D and Strik W K and Koenig T and Lehmann D   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Paul Howard A                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Feinberg I and De Bie E and Davis N M and Campbell I G                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Hamburg Sam R                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Park H Y and Lee B J and Kim J H and Bae J N and Hahm B J                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Petrek J                                                                     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Schwartzman Meredith P and Wahler Robert G                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Faber J and Srutova L and Pilarova M and Vuckova Z and Bohmova D and Dobosov…</span></span>
<span><span class="co">#&gt;    eppi_id human_code studyid title      abstract promptid prompt model question</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 9434957          0       1 Estimatin… <span style="color: #949494;">"</span>Progno…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 9433838          0       2 Self-Dire… <span style="color: #949494;">"</span>Behavi…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 9431171          0       3 Frequency… <span style="color: #949494;">"</span>The to…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 9433968          0       4 A Review … <span style="color: #949494;">"</span>The ar…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 9434460          0       5 Topograph… <span style="color: #949494;">"</span>STUDY …        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 9433554          0       6 BOOK REVI… <span style="color: #949494;">"</span>The ar…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 9435130          0       7 Rapid imp… <span style="color: #949494;">"</span>Backgr…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 9432040          0       8 Pictorial… <span style="color: #949494;">"</span>AIMS: …        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9434093          0       9 Enhancing… <span style="color: #949494;">"</span>New an…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 9431505          0      10 EEG spect… <span style="color: #949494;">"</span>Sponta…        1 Evalu… gpt-… <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt;    top_p incl_p final_decision_gpt final_decision_gpt_num  reps n_mis_answers</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     1    0.6 Include                                 1    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     1    0.1 Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     1    0   Exclude                                 0    10             0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 139 more rows</span></span></span>
<span></span>
<span><span class="co"># gpt-4 results (prompt 1)</span></span>
<span><span class="va">sum_dat_gpt4</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span><span class="op">$</span><span class="va">answer_data_sum</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">model</span>, <span class="st">"4"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">promptid</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sum_dat_gpt4</span>, width <span class="op">=</span> <span class="fl">220</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 16</span></span></span>
<span><span class="co">#&gt;    author                                                                       </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Holloway R G and Gramling R and Kelly A G                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Morawska Alina and Stallman Helen M and Sanders Matthew R and Ralph Alan     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Michel C M and Pascual-Marqui R D and Strik W K and Koenig T and Lehmann D   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Paul Howard A                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Feinberg I and De Bie E and Davis N M and Campbell I G                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Hamburg Sam R                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Park H Y and Lee B J and Kim J H and Bae J N and Hahm B J                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Petrek J                                                                     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Schwartzman Meredith P and Wahler Robert G                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Faber J and Srutova L and Pilarova M and Vuckova Z and Bohmova D and Dobosov…</span></span>
<span><span class="co">#&gt;    eppi_id human_code studyid title      abstract promptid prompt model question</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 9434957          0       1 Estimatin… <span style="color: #949494;">"</span>Progno…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 9433838          0       2 Self-Dire… <span style="color: #949494;">"</span>Behavi…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 9431171          0       3 Frequency… <span style="color: #949494;">"</span>The to…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 9433968          0       4 A Review … <span style="color: #949494;">"</span>The ar…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 9434460          0       5 Topograph… <span style="color: #949494;">"</span>STUDY …        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 9433554          0       6 BOOK REVI… <span style="color: #949494;">"</span>The ar…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 9435130          0       7 Rapid imp… <span style="color: #949494;">"</span>Backgr…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 9432040          0       8 Pictorial… <span style="color: #949494;">"</span>AIMS: …        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9434093          0       9 Enhancing… <span style="color: #949494;">"</span>New an…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 9431505          0      10 EEG spect… <span style="color: #949494;">"</span>Sponta…        1 Evalu… gpt-4 <span style="color: #949494;">"</span>Evalua…</span></span>
<span><span class="co">#&gt;    top_p incl_p final_decision_gpt final_decision_gpt_num  reps n_mis_answers</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     1      0 Exclude                                 0     1             0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 140 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analyzing-the-screening">Analyzing the screening<a class="anchor" aria-label="anchor" href="#analyzing-the-screening"></a>
</h3>
<div class="section level4">
<h4 id="simple-table">Simple table<a class="anchor" aria-label="anchor" href="#simple-table"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gpt3.5 result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span>gpt <span class="op">=</span> <span class="va">sum_dat_gpt3</span><span class="op">$</span><span class="va">final_decision_gpt_num</span>, human <span class="op">=</span> <span class="va">sum_dat_gpt3</span><span class="op">$</span><span class="va">human_code</span><span class="op">)</span></span>
<span><span class="co">#&gt;    human</span></span>
<span><span class="co">#&gt; gpt  0  1</span></span>
<span><span class="co">#&gt;   0 90  8</span></span>
<span><span class="co">#&gt;   1  9 42</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span>gpt <span class="op">=</span> <span class="va">sum_dat_gpt4</span><span class="op">$</span><span class="va">final_decision_gpt_num</span>, human <span class="op">=</span> <span class="va">sum_dat_gpt4</span><span class="op">$</span><span class="va">human_code</span><span class="op">)</span></span>
<span><span class="co">#&gt;    human</span></span>
<span><span class="co">#&gt; gpt  0  1</span></span>
<span><span class="co">#&gt;   0 90  4</span></span>
<span><span class="co">#&gt;   1  9 46</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="false-included-and-excluded-by-gpt">False included and excluded (by gpt)<a class="anchor" aria-label="anchor" href="#false-included-and-excluded-by-gpt"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">screen_perform</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">result_object</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/screen_analyzer.html">screen_analyzer</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">screen_perform</span>, width <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 20</span></span></span>
<span><span class="co">#&gt;   promptid model               reps top_p n_screened n_missing n_refs n_false_ex</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        1 gpt-3.5-turbo-0613     1     1        150         0    150         12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        1 gpt-3.5-turbo-0613    10     1        149         1    150          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        1 gpt-4                  1     1        149         1    150          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>        2 gpt-3.5-turbo-0613     1     1        150         0    150         15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>        2 gpt-3.5-turbo-0613    10     1        149         1    150         12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>        2 gpt-4                  1     1        147         3    150          4</span></span>
<span><span class="co">#&gt;   n_false_in n_true_in n_true_ex accuracy p_agreement sensitivity specificity</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>          8        38        92   0.133        0.867       0.76        0.92 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>          9        42        90   0.113        0.887       0.84        0.909</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>          9        46        90   0.086<span style="text-decoration: underline;">7</span>       0.913       0.92        0.909</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>          8        35        92   0.153        0.847       0.7         0.92 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>          7        38        92   0.127        0.873       0.76        0.929</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>          7        45        91   0.073<span style="text-decoration: underline;">3</span>       0.927       0.918       0.929</span></span>
<span><span class="co">#&gt;   kappa level_of_agreement SE_kappa CL_kappa CU_kappa</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0.694 Moderate             0.012<span style="text-decoration: underline;">1</span>    0.670    0.718</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 0.751 Moderate             0.011<span style="text-decoration: underline;">8</span>    0.728    0.774</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 0.813 Strong               0.010<span style="text-decoration: underline;">7</span>    0.792    0.834</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 0.642 Moderate             0.012<span style="text-decoration: underline;">6</span>    0.618    0.667</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 0.714 Moderate             0.012<span style="text-decoration: underline;">0</span>    0.690    0.737</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 0.845 Strong               0.010<span style="text-decoration: underline;">1</span>    0.825    0.865</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="getting-detailed-descript">Getting detailed descript<a class="anchor" aria-label="anchor" href="#getting-detailed-descript"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show example with gpt-4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Gartlehner, G., Wagner, G., Lux, L. et al. (2019). Assessing the
accuracy of machine-assisted abstract screening with DistillerAI: a user
study. <em>Systematic Reviews</em>. 8, 1-10. <a href="https://doi.org/10.1186/s13643-019-1221-3" class="external-link uri">https://doi.org/10.1186/s13643-019-1221-3</a></p>
<p>McHugh, M. L. (2012). Interrater reliability: The kappa statistic.
<em>Biochemia Medica</em>, 22(3), 276–282.</p>
<p>Waffenschmidt, S., Knelangen, M., Sieben, W., Bühn, S., &amp; Pieper,
D. (2019). Single screening versus conventional double screening for
study selection in systematic reviews: a methodological systematic
review. <em>BMC Medical Research Methodology</em> 19, 1-9. <a href="https://doi.org/10.1186/s12874-019-0782-0" class="external-link uri">https://doi.org/10.1186/s12874-019-0782-0</a></p>
<p>Westgate MJ (2019). revtools: An R package to support article
screening for evidence synthesis. <em>Research Synthesis Methods</em>.
<a href="https://doi.org/10.1002/jrsm.1374" class="external-link uri">https://doi.org/10.1002/jrsm.1374</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mikkel H. Vembye.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
